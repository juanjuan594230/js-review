<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script type="text/javascript">
        var pageHandler = {
            id: '123456',
            init: function() {
                document.addEventListener("click", function(event) {
                    console.log(this); // document
                    this.doSomething(event.type);     // error
                }, false);
            },
            doSomething: function(type) {
                console.log("Handling " + type  + " for " + this.id);
            }
        }
        pageHandler.init();


        // bind this
        // var pageHandler = {
        //     id: '123456',
        //     init: function() {
        //         document.addEventListener("click", function(event) {
        //             console.log(this); // pageHandler
        //             this.doSomething(event.type);
        //         }.bind(this), false);
        //     },
        //     doSomething: function(type) {
        //         console.log("Handling " + type  + " for " + this.id);
        //     }
        // }
        // pageHandler.init();

        // arrow function
        // var pageHandler = {
        //     id: '123456',
        //     init: function() {
        //         document.addEventListener("click", (event) => {
        //             console.log(this); // 作用域链向上查找(init\global) 随着init fn 走
        //             this.doSomething(event.type);     // error
        //         }, false);
        //     },
        //     doSomething: function(type) {
        //         console.log("Handling " + type  + " for " + this.id);
        //     }
        // }
        // // init de this 由调用的时候决定
        // // pageHandler.init() this === pageHandler so arrow fn this === pageHandler
        // pageHandler.init(); // pageHandler
        // const _init = pageHandler.init;
        // // _init() this === window so arrow fn this === window
        // _init(); // window
    </script>
</body>
</html>